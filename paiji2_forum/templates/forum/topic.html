{% extends 'forum/all.html' %}

{% comment %}

Copyright (C) 2015-2016 Louis-Guillaume DUBOIS

This file is part of paiji2-forum

paiji2-forum is free software: you can redistribute it and/or modify
it under the terms of the GNU Affero General Public License as
published by the Free Software Foundation, either version 3 of the
License, or (at your option) any later version.

paiji2-forum is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU Affero General Public License for more details.

You should have received a copy of the GNU Affero General Public License
along with this program.  If not, see <http://www.gnu.org/licenses/>.

{% endcomment %}
{% load mptt_tags %}

{% block class-topics %}{% endblock %}
{% block class-unread %}{% endblock %}
{% block class-recent %}{% endblock %}
{% block class-new %}{% endblock %}

{% block forum-content %}

<ul class="topic">
    {% recursetree object_list %}
        {% include 'forum/recurseli.html' %}
    {% endrecursetree %}
</ul>

<script>
function Markdownify(value, index, ar) {
  value.innerHTML = markdown.toHTML(
    value.innerHTML
      .replace(/&amp;/g,'&')
      .replace(/&nbsp;/g,'Â ')
      .replace(/<br>/g,'\n')
      .replace(/&gt;/g,'>')
      .replace(/&lt;/g,'<')
  );
};
var texts = document.getElementsByClassName("forum-text-md");
var textsList = Array.prototype.slice.call(texts);
textsList.forEach(Markdownify);
</script>

{% endblock %}
